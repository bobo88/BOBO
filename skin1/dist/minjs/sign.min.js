!function(){function e(){var e=$(window).height(),n=$(window).width(),t=e;i(n,t)}function n(e,n){var i=$("#imgbg"),t=i.data("imgsrc").split("|");$img=$('<img src="'+t[parseInt(Math.random()*t.length,10)]+'" width="100%" height="100%"/>'),i.html($img)}function i(e,n){var i,t,r=$("#imgbg").find("img"),a=1920,o=1e3,s=0,d=0;e>n?(i=e,t=e*o/a,n>t?(t=n,i=a*n/o,d=(0-(i-e))/2):s=(0-(t-n))/2):(t=n,i=a*n/o,e>i?(i=e,t=e*o/a,s=(0-(t-n))/2):d=(0-(i-e))/2),r.css({height:t,width:i,top:s,left:d})}$(function(){n(),e(),$(window).resize(function(){e()})})}(),$.validator.addMethod("mobile",function(e,n){var i=e.length,t=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(n)||11==i&&t.test(e)},"手机号码格式错误"),function(){var e=$("#js-signinform");e.length>0&&e.validate({rules:{phone:{required:!0,mobile:!0},password:{required:!0,maxlength:60,minlength:6}},messages:{phone:{required:"请输入大陆地区手机号码",mobile:"请输入正确的手机格式"},password:{required:"请设置密码",minlength:"密码长度必须大于6个字符"}},submitHandler:function(e){var n=$("#js-submitLoginForm");n.attr("disabled","disabled"),$.ajax({url:"src_login.php",type:"POST",dataType:"json",data:$("#js-signinform").serialize()}).done(function(e){if(1===e.status){if(e.username){var i=$("#ref").val()?$("#ref").val():"";i?window.location.href=i:window.location.href=DOMAIN}}else GLOBAL.PopObj.alert({content:e.msg});n.attr("disabled",!1)})},errorPlacement:function(e,n){n.parent().find("label.checked").remove(),e.appendTo(n.parent())},success:function(e){e.remove()}})}(),function(){var e=$("#js-signupform");e.length>0&&e.validate({rules:{phone:{required:!0,mobile:!0},nickname:{required:!0,minlength:4},regcode:{required:!0,maxlength:4,minlength:4},password:{required:!0,maxlength:60,minlength:6},password_confirm:{required:!0,minlength:6,maxlength:60,equalTo:$("#js-regPassword")}},messages:{phone:{required:"请输入大陆地区手机号码",mobile:"请输入正确的手机格式"},nickname:{required:"请输入昵称",minlength:"昵称长度不能小于4个字符"},regcode:{required:"请输入验证码",maxlength:"验证码长度必须为4位",minlength:"验证码长度必须为4位"},password:{required:"请设置密码",minlength:"密码长度必须大于6个字符"},password_confirm:{required:"请再次确认密码",minlength:"密码长度必须大于6个字符",equalTo:"两次密码输入不一致"}},submitHandler:function(e){var n=$("#js-submitRegForm");n.attr("disabled","disabled"),$.ajax({url:"src_reg.php",type:"POST",dataType:"json",data:$("#js-signupform").serialize()}).done(function(e){1===e.status?(GLOBAL.PopObj.alert({content:"恭喜您，注册成功! 3秒后自动跳转到登录页面..."}),document.getElementById("js-signupform").reset(),setTimeout(function(){window.location.href=DOMAIN+"/sign.html"},3e3)):GLOBAL.PopObj.alert({content:e.msg}),n.attr("disabled",!1)})},errorPlacement:function(e,n){n.parent().find("label.checked").remove(),e.appendTo(n.parent())},success:function(e){e.remove()}})}(),function(){var e=$("#js-adminSigninform");e.length>0&&e.validate({rules:{phone:{required:!0,mobile:!0},password:{required:!0,maxlength:60,minlength:6}},messages:{phone:{required:"请输入大陆地区手机号码",mobile:"请输入正确的手机格式"},password:{required:"请设置密码",minlength:"密码长度必须大于6个字符"}},submitHandler:function(e){var n=$("#js-submitAdminLoginForm");n.attr("disabled","disabled"),$.ajax({url:"src_adminlogin.php",type:"POST",dataType:"json",data:$("#js-adminSigninform").serialize()}).done(function(e){1===e.status?e.username&&(window.location.href=DOMAIN+"/article_publish.html"):GLOBAL.PopObj.alert({content:e.msg}),n.attr("disabled",!1)})},errorPlacement:function(e,n){n.parent().find("label.checked").remove(),e.appendTo(n.parent())},success:function(e){e.remove()}})}(),$(function(){$("#js-signWrapBox").find(".input-group").find("input").on("focus",function(){var e=$(this),n=e.parents(".input-group");n.addClass("active").siblings(".input-group").removeClass("active")}),$("#js-checkpic").click(function(){var e=$(this),n=e.attr("src");e.attr("src",n+"?"+(new Date).getTime())})});